/* ==============================
 *   セクション
 * ============================== */

@keyframes section-target {
	0% {
		background-color: var(--color-verylightred);
	}

	50% {
		background-color: var(--color-verylightred);
	}

	100% {
		background-color: transparent;
	}
}

.p-section {
	--_margin-block: 1em;

	&:not(:first-child) {
		@nest :not(.p-section__hdg) + & {
			margin-block-start: var(--_margin-block);
		}
	}

	&:not(:last-child) {
		margin-block-end: var(--_margin-block);
	}

	&.-hdg-a {
		--_margin-block: 4.5em;
	}

	&.-hdg-b {
		--_margin-block: 3.75em;
	}

	&.-hdg-c {
		--_margin-block: 3em;
	}

	&:target {
		animation: section-target 1s;
	}
}

.p-section__hdg {
	line-height: var(--line-height-narrow);

	@nest .p-section.-hdg-a > & {
		--stack-margin-base: 2em;

		border-block-start: 1px solid transparent;
		border-block-end: 1px solid var(--color-border-dark);
		padding: 0.25em 0;

		& > h2 {
			--_stick-width: 0.25em;
			--_stick-height: 80%;

			position: relative; /* for Safari */
			contain: content;
			padding-inline-start: calc(var(--_stick-width) + 0.5em);
			font-size: calc(100% * var(--font-ratio-6));

			&::before {
				display: block;
				position: absolute;
				inset-block-start: calc((100% - var(--_stick-height)) / 2);
				inset-inline-start: 0;
				border-radius: var(--border-radius-full);
				background: var(--color-gray);
				width: var(--_stick-width);
				height: var(--_stick-height);
				content: "";
			}
		}
	}

	@nest .p-section.-hdg-b > & {
		& > h3 {
			--_stick-width: 0.25em;
			--_stick-height: 80%;

			position: relative; /* for Safari */
			contain: content;
			padding-inline-start: calc(var(--_stick-width) + 0.5em);
			font-size: calc(100% * var(--font-ratio-4));

			&::before {
				display: inline-block;
				position: absolute;
				inset-block-start: calc((100% - var(--_stick-height)) / 2);
				inset-inline-start: 0;
				border-radius: var(--border-radius-full);
				background: var(--color-lightgray);
				width: var(--_stick-width);
				height: var(--_stick-height);
				content: "";
			}
		}
	}

	@nest .p-section.-hdg-c > & {
		& > :is(h3, h4) {
			font-size: calc(100% * var(--font-ratio-2));
		}
	}
}
